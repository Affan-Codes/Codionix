# Server Configuration
NODE_ENV=development
PORT=5000
API_VERSION=v1

# Database
DATABASE_URL="postgresql://username:password@host:5432/codionix_db?sslmode=require"

# Database Connection Pool
# CRITICAL: Configure these based on your database and deployment
# 
# Calculation guide:
# - If you have 100 max_connections on your DB and 5 app instances:
#   DB_POOL_MAX = (100 / 5) - 10% buffer = 18
# 
# - DB_POOL_MIN: Keep 2-5 warm connections to avoid cold starts
# - DB_IDLE_TIMEOUT_MS: Return idle connections after 30s to prevent exhaustion
# - DB_CONNECTION_TIMEOUT_MS: Fail fast after 10s instead of hanging
DB_POOL_MAX=5
DB_POOL_MIN=1
DB_IDLE_TIMEOUT_MS=20000
DB_CONNECTION_TIMEOUT_MS=15000

# Database Query Timeouts
# CRITICAL: Prevent runaway queries from exhausting connection pool
# 
# - DB_QUERY_TIMEOUT_MS: Kill individual queries that take too long
#   Set based on your slowest acceptable query (default: 10s)
# 
# - DB_TRANSACTION_TIMEOUT_MS: Kill transactions that hold locks too long
#   MUST be >= DB_QUERY_TIMEOUT_MS (default: 15s)
# 
# - DB_SLOW_QUERY_THRESHOLD_MS: Log queries slower than this for optimization
#   Set to your performance SLA (default: 1s)
DB_QUERY_TIMEOUT_MS=10000
DB_TRANSACTION_TIMEOUT_MS=15000
DB_SLOW_QUERY_THRESHOLD_MS=1000

# JWT Secrets
JWT_ACCESS_SECRET=your_access_secret_min_32_chars
JWT_REFRESH_SECRET=your_refresh_secret_min_32_chars
JWT_ACCESS_EXPIRY=15m
JWT_REFRESH_EXPIRY=7d

# CORS
CORS_ORIGIN=http://localhost:5173

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Logging
LOG_LEVEL=info

# Frontend URL
FRONTEND_URL=http://localhost:5173

# Email (SMTP)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
EMAIL_FROM="Codionix <noreply@codionix.com>"

LOG_LEVEL=info  # Use 'debug' for verbose correlation logs