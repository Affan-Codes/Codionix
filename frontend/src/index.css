@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

/* ═══════════════════════════════════════════════════════════════════
   CODIONIX DESIGN TOKEN SYSTEM
   
   Philosophy: "Builder's Workshop"
   - Teal-cyan primary (distinctive, builder-focused)
   - Warm amber secondary (earned achievements)
   - Warm stone neutrals (human comfort)
   - Functional accents (purposeful, restrained)
   
   Constraint System:
   - 70-80% neutral usage
   - 40-50% of color is teal-cyan
   - 10-15% amber (rare, meaningful)
   - 15-20% functional accents
   - Max 3 accent colors per screen
   ═══════════════════════════════════════════════════════════════════ */

@theme inline {
  /* ═══════════════════════════════════════════════════════════════════
     RADIUS SYSTEM (Inherited from shadcn)
     ═══════════════════════════════════════════════════════════════════ */
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --radius-2xl: calc(var(--radius) + 8px);
  --radius-3xl: calc(var(--radius) + 12px);
  --radius-4xl: calc(var(--radius) + 16px);

  /* ═══════════════════════════════════════════════════════════════════
     SURFACE TOKENS (Background Layers & Elevation)
     Mode-specific, creates depth through layering
     ═══════════════════════════════════════════════════════════════════ */

  /* Base Canvas (Darkest/Lightest) */
  --color-surface-canvas: oklch(0.17 0.015 200); /* Deep teal-black */
  --color-surface-canvas-subtle: oklch(
    0.175 0.015 200
  ); /* Barely lighter canvas */

  /* Elevated Surfaces (Cards, Containers) */
  --color-surface-elevated: oklch(0.22 0.02 200); /* Teal-charcoal */
  --color-surface-elevated-hover: oklch(0.25 0.02 200); /* Teal-slate (hover) */
  --color-surface-elevated-active: oklch(0.28 0.025 200); /* Active state */

  /* Modal/Popover Surfaces (Highest Elevation) */
  --color-surface-overlay: oklch(0.24 0.02 200); /* Modal background */
  --color-surface-tooltip: oklch(0.26 0.022 200); /* Tooltip/popover */

  /* ═══════════════════════════════════════════════════════════════════
     TEXT TOKENS (Hierarchy & Readability)
     Mode-specific, maintains warm undertones
     ═══════════════════════════════════════════════════════════════════ */

  /* Primary Text (Headings, Emphasis) */
  --color-text-primary: oklch(0.95 0.005 40); /* Stone-white (warm) */
  --color-text-primary-on-brand: oklch(0.98 0.003 40); /* White on teal */

  /* Body Text (Default Reading) */
  --color-text-body: oklch(0.85 0.008 40); /* Stone-gray-200 */
  --color-text-body-subtle: oklch(0.65 0.01 40); /* Stone-gray-400 */

  /* Metadata/Secondary Text */
  --color-text-secondary: oklch(0.55 0.012 40); /* Stone-gray-500 */
  --color-text-tertiary: oklch(0.45 0.015 40); /* Stone-gray-600 */

  /* Disabled/Placeholder Text */
  --color-text-disabled: oklch(
    0.4 0.015 40
  ); /* Stone-gray-700 (low contrast) */
  --color-text-placeholder: oklch(0.48 0.012 40); /* Input placeholder */

  /* ═══════════════════════════════════════════════════════════════════
     BRAND TOKENS (Primary Identity)
     Mode-invariant hue, mode-specific luminosity
     ═══════════════════════════════════════════════════════════════════ */

  /* Primary: Teal-Cyan (Builder Focus) */
  --color-brand-primary: oklch(0.65 0.15 195); /* Electric teal-cyan */
  --color-brand-primary-hover: oklch(0.7 0.16 195); /* Brighter on hover */
  --color-brand-primary-active: oklch(0.6 0.14 195); /* Pressed state */
  --color-brand-primary-subtle: oklch(
    0.65 0.15 195 / 0.15
  ); /* 15% opacity bg */
  --color-brand-primary-muted: oklch(
    0.65 0.15 195 / 0.3
  ); /* 30% opacity accent */

  /* Secondary: Warm Amber (Earned Achievement) */
  --color-brand-secondary: oklch(0.7 0.14 60); /* Warm amber-gold */
  --color-brand-secondary-hover: oklch(0.75 0.15 60); /* Glow on hover */
  --color-brand-secondary-subtle: oklch(0.7 0.14 60 / 0.2); /* 20% opacity bg */
  --color-brand-secondary-muted: oklch(
    0.7 0.14 60 / 0.35
  ); /* 35% opacity glow */

  /* ═══════════════════════════════════════════════════════════════════
     BORDER TOKENS (Dividers, Outlines)
     Mode-specific, maintains teal tint in dark mode
     ═══════════════════════════════════════════════════════════════════ */

  /* Structural Borders */
  --color-border-default: oklch(
    0.35 0.018 200
  ); /* Stone-gray-800 + teal tint */
  --color-border-subtle: oklch(0.3 0.015 200); /* Barely visible divider */
  --color-border-strong: oklch(0.4 0.02 200); /* Emphasized border */

  /* Interactive Borders */
  --color-border-focus: oklch(0.65 0.15 195); /* Teal-cyan focus ring */
  --color-border-error: oklch(0.58 0.18 25); /* Coral-red validation */
  --color-border-success: oklch(0.7 0.14 60); /* Amber success */

  /* ═══════════════════════════════════════════════════════════════════
     STATE TOKENS (Functional Accents)
     Mode-invariant semantics, mode-specific contrast
     ═══════════════════════════════════════════════════════════════════ */

  /* Error/Destructive (Deep Coral-Red) */
  --color-state-error: oklch(0.58 0.18 25); /* Warm red, not harsh */
  --color-state-error-hover: oklch(0.62 0.19 25); /* Brighter on hover */
  --color-state-error-subtle: oklch(0.58 0.18 25 / 0.15); /* Error bg */
  --color-state-error-muted: oklch(0.58 0.18 25 / 0.3); /* Error border */

  /* Warning/Caution (Burnt Orange) */
  --color-state-warning: oklch(0.65 0.15 50); /* Earthy orange */
  --color-state-warning-hover: oklch(0.68 0.16 50);
  --color-state-warning-subtle: oklch(0.65 0.15 50 / 0.15);
  --color-state-warning-muted: oklch(0.65 0.15 50 / 0.3);

  /* Info/Optional (Soft Violet-Purple) */
  --color-state-info: oklch(0.62 0.12 280); /* Calm purple */
  --color-state-info-hover: oklch(0.65 0.13 280);
  --color-state-info-subtle: oklch(0.62 0.12 280 / 0.15);
  --color-state-info-muted: oklch(0.62 0.12 280 / 0.3);

  /* Success/Stable (Muted Sage Green) */
  --color-state-success: oklch(0.68 0.1 150); /* Soft green */
  --color-state-success-hover: oklch(0.7 0.11 150);
  --color-state-success-subtle: oklch(0.68 0.1 150 / 0.15);
  --color-state-success-muted: oklch(0.68 0.1 150 / 0.3);

  /* Exploratory/Low-Priority (Soft Lavender) */
  --color-state-exploratory: oklch(0.7 0.08 300); /* Very subtle lavender */
  --color-state-exploratory-hover: oklch(0.72 0.09 300);
  --color-state-exploratory-subtle: oklch(0.7 0.08 300 / 0.12);
  --color-state-exploratory-muted: oklch(0.7 0.08 300 / 0.25);

  /* ═══════════════════════════════════════════════════════════════════
     INTERACTION TOKENS (Focus, Hover, Active)
     Derived from brand tokens, enforces consistency
     ═══════════════════════════════════════════════════════════════════ */

  /* Focus Ring (Always Teal-Cyan) */
  --color-focus-ring: var(--color-brand-primary);
  --color-focus-ring-offset: var(--color-surface-canvas);

  /* Hover States (Elevation + Glow) */
  --color-hover-overlay: oklch(0.65 0.15 195 / 0.08); /* Subtle teal glow */
  --color-hover-border: var(--color-brand-primary-muted);

  /* Active/Pressed States */
  --color-active-overlay: oklch(0.65 0.15 195 / 0.12); /* Stronger teal */
  --color-active-border: var(--color-brand-primary);

  /* ═══════════════════════════════════════════════════════════════════
     SHADOW TOKENS (Elevation System)
     Mode-specific, uses teal-black in dark mode
     ═══════════════════════════════════════════════════════════════════ */

  --shadow-color: oklch(0.15 0.02 200); /* Teal-black for shadows */
  --shadow-sm: 0 1px 2px 0 var(--shadow-color / 0.2);
  --shadow-md: 0 4px 6px -1px var(--shadow-color / 0.25),
    0 2px 4px -2px var(--shadow-color / 0.15);
  --shadow-lg: 0 10px 15px -3px var(--shadow-color / 0.3),
    0 4px 6px -4px var(--shadow-color / 0.2);
  --shadow-xl: 0 20px 25px -5px var(--shadow-color / 0.35),
    0 8px 10px -6px var(--shadow-color / 0.25);

  /* ═══════════════════════════════════════════════════════════════════
     CHART/DATA VISUALIZATION TOKENS
     Functional, accessible, mode-aware
     ═══════════════════════════════════════════════════════════════════ */

  --color-chart-1: oklch(0.65 0.15 195); /* Teal-cyan (primary data) */
  --color-chart-2: oklch(0.7 0.14 60); /* Amber (secondary data) */
  --color-chart-3: oklch(0.62 0.12 280); /* Violet (tertiary) */
  --color-chart-4: oklch(0.68 0.1 150); /* Sage green */
  --color-chart-5: oklch(0.65 0.15 50); /* Burnt orange */

  /* ═══════════════════════════════════════════════════════════════════
     COMPONENT-SPECIFIC SEMANTIC TOKENS
     Maps intent to visual treatment
     ═══════════════════════════════════════════════════════════════════ */

  /* Buttons */
  --color-button-primary-bg: var(--color-brand-primary);
  --color-button-primary-text: var(--color-text-primary-on-brand);
  --color-button-primary-hover: var(--color-brand-primary-hover);

  --color-button-secondary-bg: var(--color-surface-elevated);
  --color-button-secondary-text: var(--color-text-body);
  --color-button-secondary-border: var(--color-border-default);

  --color-button-destructive-bg: var(--color-state-error);
  --color-button-destructive-text: var(--color-text-primary-on-brand);
  --color-button-destructive-hover: var(--color-state-error-hover);

  /* Cards */
  --color-card-bg: var(--color-surface-elevated);
  --color-card-border: var(--color-border-subtle);
  --color-card-hover-bg: var(--color-surface-elevated-hover);
  --color-card-hover-border: var(--color-border-default);

  /* Inputs */
  --color-input-bg: var(--color-surface-canvas-subtle);
  --color-input-border: var(--color-border-default);
  --color-input-focus-border: var(--color-focus-ring);
  --color-input-error-border: var(--color-border-error);
  --color-input-text: var(--color-text-body);
  --color-input-placeholder: var(--color-text-placeholder);

  /* Badges/Tags */
  --color-badge-neutral-bg: var(--color-surface-elevated);
  --color-badge-neutral-text: var(--color-text-body-subtle);
  --color-badge-neutral-border: var(--color-border-subtle);

  --color-badge-primary-bg: var(--color-brand-primary-subtle);
  --color-badge-primary-text: var(--color-brand-primary);
  --color-badge-primary-border: var(--color-brand-primary-muted);

  --color-badge-success-bg: var(--color-state-success-subtle);
  --color-badge-success-text: var(--color-state-success);
  --color-badge-success-border: var(--color-state-success-muted);

  /* Navigation */
  --color-nav-bg: var(--color-surface-canvas);
  --color-nav-border: var(--color-border-subtle);
  --color-nav-item-text: var(--color-text-body-subtle);
  --color-nav-item-hover: var(--color-hover-overlay);
  --color-nav-item-active-bg: var(--color-brand-primary-subtle);
  --color-nav-item-active-text: var(--color-brand-primary);

  /* Sidebar (Future-proofing) */
  --color-sidebar-bg: var(--color-surface-canvas);
  --color-sidebar-border: var(--color-border-subtle);
  --color-sidebar-item-hover: var(--color-hover-overlay);
  --color-sidebar-item-active: var(--color-brand-primary-subtle);
}

/* ═══════════════════════════════════════════════════════════════════
   ROOT VARIABLES (Dark Mode - PRIMARY EXPERIENCE)
   ═══════════════════════════════════════════════════════════════════ */
:root {
  --radius: 0.75rem; /* 12px — slightly more rounded */

  /* Surface Layer System */
  --background: var(--color-surface-canvas);
  --foreground: var(--color-text-primary);

  /* Card/Elevated Surfaces */
  --card: var(--color-card-bg);
  --card-foreground: var(--color-text-body);

  /* Popover/Modal Surfaces */
  --popover: var(--color-surface-overlay);
  --popover-foreground: var(--color-text-body);

  /* Brand Colors (Primary = Teal-Cyan) */
  --primary: var(--color-brand-primary);
  --primary-foreground: var(--color-text-primary-on-brand);

  /* Secondary (Used sparingly - Amber for achievements) */
  --secondary: var(--color-surface-elevated);
  --secondary-foreground: var(--color-text-body);

  /* Muted (Neutral backgrounds) */
  --muted: var(--color-surface-elevated);
  --muted-foreground: var(--color-text-body-subtle);

  /* Accent (Interactive hover states - Teal-Cyan) */
  --accent: var(--color-surface-elevated-hover);
  --accent-foreground: var(--color-text-body);

  /* Destructive (Error states) */
  --destructive: var(--color-state-error);
  --destructive-foreground: var(--color-text-primary-on-brand);

  /* Borders & Inputs */
  --border: var(--color-border-default);
  --input: var(--color-input-border);
  --ring: var(--color-focus-ring);

  /* Achievement/Success Color (Warm Amber) */
  --achievement: var(--color-brand-secondary);
  --achievement-foreground: var(--color-text-primary-on-brand);
}

/* ═══════════════════════════════════════════════════════════════════
   LIGHT MODE (Equally Intentional)
   ═══════════════════════════════════════════════════════════════════ */
.dark {
  /* Surface System (Inverted) */
  --color-surface-canvas: oklch(0.97 0.005 40); /* Warm off-white */
  --color-surface-canvas-subtle: oklch(0.96 0.006 40);

  --color-surface-elevated: oklch(0.99 0.003 40); /* Cream */
  --color-surface-elevated-hover: oklch(0.98 0.004 40);
  --color-surface-elevated-active: oklch(0.97 0.005 40);

  --color-surface-overlay: oklch(0.99 0.003 40);
  --color-surface-tooltip: oklch(0.98 0.004 40);

  /* Text System (Inverted) */
  --color-text-primary: oklch(0.2 0.008 40); /* Stone-black (warm) */
  --color-text-primary-on-brand: oklch(0.98 0.003 40); /* White on teal */

  --color-text-body: oklch(0.3 0.01 40); /* Stone-gray-800 */
  --color-text-body-subtle: oklch(0.45 0.012 40); /* Stone-gray-600 */

  --color-text-secondary: oklch(0.55 0.012 40);
  --color-text-tertiary: oklch(0.65 0.01 40);

  --color-text-disabled: oklch(0.7 0.008 40);
  --color-text-placeholder: oklch(0.6 0.01 40);

  /* Brand Colors (Hue-consistent, contrast-adjusted) */
  --color-brand-primary: oklch(0.55 0.16 195); /* Deeper teal for light bg */
  --color-brand-primary-hover: oklch(0.6 0.17 195);
  --color-brand-primary-active: oklch(0.5 0.15 195);
  --color-brand-primary-subtle: oklch(0.55 0.16 195 / 0.12);
  --color-brand-primary-muted: oklch(0.55 0.16 195 / 0.25);

  --color-brand-secondary: oklch(0.6 0.13 60); /* Slightly desaturated amber */
  --color-brand-secondary-hover: oklch(0.65 0.14 60);
  --color-brand-secondary-subtle: oklch(0.6 0.13 60 / 0.15);
  --color-brand-secondary-muted: oklch(0.6 0.13 60 / 0.28);

  /* Borders (Warm stone-gray) */
  --color-border-default: oklch(0.85 0.006 40); /* Stone-gray-300 */
  --color-border-subtle: oklch(0.9 0.005 40);
  --color-border-strong: oklch(0.8 0.008 40);

  --color-border-focus: var(--color-brand-primary);
  --color-border-error: oklch(0.5 0.18 25); /* Deeper red for light bg */
  --color-border-success: var(--color-brand-secondary);

  /* State Colors (Contrast-adjusted) */
  --color-state-error: oklch(0.5 0.18 25);
  --color-state-error-hover: oklch(0.55 0.19 25);
  --color-state-error-subtle: oklch(0.5 0.18 25 / 0.12);
  --color-state-error-muted: oklch(0.5 0.18 25 / 0.25);

  --color-state-warning: oklch(0.55 0.15 50);
  --color-state-warning-hover: oklch(0.58 0.16 50);
  --color-state-warning-subtle: oklch(0.55 0.15 50 / 0.12);
  --color-state-warning-muted: oklch(0.55 0.15 50 / 0.25);

  --color-state-info: oklch(0.52 0.12 280);
  --color-state-info-hover: oklch(0.55 0.13 280);
  --color-state-info-subtle: oklch(0.52 0.12 280 / 0.12);
  --color-state-info-muted: oklch(0.52 0.12 280 / 0.25);

  --color-state-success: oklch(0.58 0.1 150);
  --color-state-success-hover: oklch(0.6 0.11 150);
  --color-state-success-subtle: oklch(0.58 0.1 150 / 0.12);
  --color-state-success-muted: oklch(0.58 0.1 150 / 0.25);

  --color-state-exploratory: oklch(0.6 0.08 300);
  --color-state-exploratory-hover: oklch(0.62 0.09 300);
  --color-state-exploratory-subtle: oklch(0.6 0.08 300 / 0.1);
  --color-state-exploratory-muted: oklch(0.6 0.08 300 / 0.22);

  /* Shadows (Warm stone-gray, softer) */
  --shadow-color: oklch(0.7 0.005 40);
  --shadow-sm: 0 1px 2px 0 var(--shadow-color / 0.15);
  --shadow-md: 0 4px 6px -1px var(--shadow-color / 0.2),
    0 2px 4px -2px var(--shadow-color / 0.12);
  --shadow-lg: 0 10px 15px -3px var(--shadow-color / 0.25),
    0 4px 6px -4px var(--shadow-color / 0.15);
  --shadow-xl: 0 20px 25px -5px var(--shadow-color / 0.28),
    0 8px 10px -6px var(--shadow-color / 0.18);
}

/* ═══════════════════════════════════════════════════════════════════
   BASE STYLES (Typography & Focus)
   ═══════════════════════════════════════════════════════════════════ */
@layer base {
  * {
    @apply border-border outline-ring/50;
  }

  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
  }

  /* Typography Hierarchy */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-semibold tracking-tight;
  }

  h1 {
    @apply text-3xl leading-tight;
    letter-spacing: -0.02em;
  }
  h2 {
    @apply text-2xl leading-tight;
    letter-spacing: -0.01em;
  }
  h3 {
    @apply text-xl leading-snug;
  }
  h4 {
    @apply text-lg leading-snug;
  }

  p {
    @apply leading-relaxed;
  }

  /* Focus States (Always Teal-Cyan) */
  :focus-visible {
    @apply outline-none ring-2 ring-ring ring-offset-2 ring-offset-background;
  }
}

/* ═══════════════════════════════════════════════════════════════════
   CUSTOM UTILITIES (Component Intent Mapping)
   ═══════════════════════════════════════════════════════════════════ */
@layer utilities {
  /* Achievement Badge (Warm Amber - RARE) */
  .achievement-badge {
    background: var(--color-brand-secondary-subtle);
    color: var(--color-brand-secondary);
    border: 1px solid var(--color-brand-secondary-muted);
  }

  /* Status Badge Variants (Functional Accents) */
  .status-pending {
    background: var(--color-state-warning-subtle);
    color: var(--color-state-warning);
    border: 1px solid var(--color-state-warning-muted);
  }

  .status-in-progress {
    background: var(--color-brand-primary-subtle);
    color: var(--color-brand-primary);
    border: 1px solid var(--color-brand-primary-muted);
  }

  .status-completed {
    background: var(--color-state-success-subtle);
    color: var(--color-state-success);
    border: 1px solid var(--color-state-success-muted);
  }

  .status-error {
    background: var(--color-state-error-subtle);
    color: var(--color-state-error);
    border: 1px solid var(--color-state-error-muted);
  }

  .status-info {
    background: var(--color-state-info-subtle);
    color: var(--color-state-info);
    border: 1px solid var(--color-state-info-muted);
  }

  /* Card Hover (Teal Glow) */
  .card-interactive {
    @apply transition-all duration-200 ease-out;
  }
  .card-interactive:hover {
    background: var(--color-card-hover-bg);
    border-color: var(--color-card-hover-border);
    box-shadow: 0 0 0 1px var(--color-brand-primary-muted);
  }

  /* Gradient Text (Teal-Cyan) */
  .gradient-text {
    background: linear-gradient(
      135deg,
      var(--color-brand-primary) 0%,
      var(--color-brand-primary-hover) 100%
    );
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  /* Focus Ring (Consistent) */
  .focus-ring {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2;
  }
}

/* ═══════════════════════════════════════════════════════════════════
   COMPONENT OVERRIDES (Enforce Design System)
   ═══════════════════════════════════════════════════════════════════ */

/* Button States */
button:disabled {
  @apply cursor-not-allowed opacity-50;
}

/* Input Focus (Teal-Cyan Only) */
input:focus,
textarea:focus,
select:focus {
  border-color: var(--color-input-focus-border);
  box-shadow: 0 0 0 3px var(--color-brand-primary-subtle);
}

/* Input Error State */
input[aria-invalid="true"],
textarea[aria-invalid="true"],
select[aria-invalid="true"] {
  border-color: var(--color-input-error-border);
  box-shadow: 0 0 0 3px var(--color-state-error-subtle);
}

/* Smooth Scrolling */
html {
  scroll-behavior: smooth;
}

/* Selection Color (Teal-Cyan) */
::selection {
  background: var(--color-brand-primary-subtle);
  color: var(--color-brand-primary);
}
